<!DOCTYPE html>
<html>
  <head>
    <title> Study Buddy </title>
    <link rel="stylesheet" href="studybuddy2.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css"><!--timer-->
    <script src='https://cdnjs.cloudflare.com/ajax/libs/vue/2.5.17-beta.0/vue.js'></script> <!--timer-->
  </head>
  <body>
    <div class="container" id="parent">

      <div id="right" class="np"> <!--right side of page, notepad-->
        <ol id="myTabs">
          <button class="tablink" onclick="openNote('INST201', this, '#555')" id="defaultOpen">INST201</button>
          <button class="tablink" onclick="openNote('INST377', this, '#555')">INST377</button>
          <button class="tablink" onclick="openNote('INST466', this, '#555')">INST466</button>
        </ol>
        <div id="tabDIV" class="tablink">
          <input type="text" id="theInput" placeholder="New Tab...">
          <span onclick="newTabElement()" class="add">Add</span>
        </div>
        <div id="INST201" class="tabcontent">
          <textarea class="notes" placeholder="Start typing..."></textarea>
        </div>
        <div id="INST377" class="tabcontent">
          <textarea class="notes" placeholder="Start typing..."></textarea>
        </div>
        <div id="INST466" class="tabcontent">
          <textarea class="notes" placeholder="Start typing..."></textarea>
        </div>

        <script>
        function openNote(noteName,elmnt,color) {
            var i, tabcontent, tablinks;
            tabcontent = document.getElementsByClassName("tabcontent");
            for (i = 0; i < tabcontent.length; i++) {
                tabcontent[i].style.display = "none";
            }
            tablinks = document.getElementsByClassName("tablink");
            for (i = 0; i < tablinks.length; i++) {
                tablinks[i].style.backgroundColor = "";
            }
            document.getElementById(noteName).style.display = "block";
            elmnt.style.backgroundColor = color;
        }
            document.getElementById("defaultOpen").click();

        var myNodelist = document.getElementsByTagName("button");
        var i;
        for (i = 0; i < myNodelist.length; i++) {
          var span = document.createElement("SPAN");
          var txt = document.createTextNode("\u00D7");
          span.className = "close";
          span.appendChild(txt);
          myNodelist[i].appendChild(span);
        }

        var close = document.getElementsByClassName("close");
        var i;
        for (i = 0; i < close.length; i++) {
          close[i].onclick = function() {
            var div = this.parentElement;
            div.style.display = "none";
          }
        }

        // Create a new tab when clicking on the "Add" button
        function newTabElement() {
          var button = document.createElement("button");
          var inputValue = document.getElementById("theInput").value;
          var t = document.createTextNode(inputValue);
          button.appendChild(t);
          if (inputValue === "") {
            alert("You must write something!");
          } else {
            document.getElementById("myTabs").appendChild(button);
          }
          document.getElementById("theInput").value = "";

          var span = document.createElement("SPAN");
          var txt = document.createTextNode("\u00D7");
          span.className = "close";
          span.appendChild(txt);
          button.appendChild(span);

          for (i = 0; i < close.length; i++) {
            close[i].onclick = function() {
              var div = this.parentElement;
              div.style.display = "none";
            }
          }
        }
      </script>
  </div><!--right side of page, notepad-->

  <div id="leftSide" class="left"><!--left-->
  <div id="upperleft" class="time"><!--timer-->
  <script type="text/x-template" id="app-header">
  <header>
    <div class="navcontainer">
      <div class="nav">
        <div class="nav-logo">Pomodoro Clock</div>
        <button @click="toggleSidebar" class="nav-toggle">
          <svg width="20" height="8" xmlns="http://www.w3.org/2000/svg"><path d="M1 0h20a1 1 0 0 1 0 2H1a1 1 0 1 1 0-2zm0 6h16a1 1 0 0 1 0 2H1a1 1 0 1 1 0-2z" fill="#FFF" fill-rule="evenodd"/></svg>
        </button>
        <app-sidebar
          v-show="isSidebarOpen"
          :init-work="initWork"
          :init-short-break="initShortBreak"
          :is-sidebar-open="isSidebarOpen"
          @change="filterChange"
          @toggle="toggleSidebar"
          @reset="$emit('reset')"
        ></app-sidebar>
      </div>
    </div>
  </header>
</script>

<script type="text/x-template" id="app-sidebar">
  <transition
    name="sidebar"
    enter-active-class="sidebar--show">
    <div class="sidebar">
      <button @click="$emit('toggle')" class="sidebar-toggle">
        <svg width="14" height="14" xmlns="http://www.w3.org/2000/svg"><path d="M5.586 7L.636 2.05A1 1 0 0 1 2.05.636L7 5.586l4.95-4.95a1 1 0 0 1 1.414 1.414L8.414 7l4.95 4.95a1 1 0 0 1-1.414 1.414L7 8.414l-4.95 4.95A1 1 0 0 1 .636 11.95L5.586 7z" fill="#333" fill-rule="evenodd"/></svg>
      </button>

      <div class="filter">
        <span class="filter__title">work</span>
        <div class="filter__time">{{ initWork }}</div>
        <input @change="handleChange" :value="initWork" data-type="work" class="filter__input" type="range" min="1" max="120">
      </div>

      <div class="filter">
        <span class="filter__title">short break</span>
        <div class="filter__time">{{ initShortBreak }}</div>
        <input @change="handleChange" :value="initShortBreak" data-type="short-break"  class="filter__input" type="range" min="1" max="120">
      </div>

      <!-- <div class="filter" v-for="filter in filters" :key="filter.id">
        <span class="filter__title">{{ filter.title }}</span>
        <div class="filter__time">{{ filter.default }}</div>
        <input @change="handleChange" :data-type="filter.title | hyphen " class="filter__input" :min="filter.min" :max="filter.max" v-model="myComputedInit" type="range"/>
      </div> -->

      <button @click="reset" class="filter__reset-btn">Reset to defaults</button>
    </div>
  </transition>
</script>

<script type="text/x-template" id="app-main">

  <main class="site__content">
    <div class="timecontainer">
      <div class="timer">
        <span class="timer__session js-session">{{ isBreakTime ? 'break' : 'work' }}</span>
        <span class="timer__countdown js-countdown">{{`${minutes}:${seconds}`}}</span>
      </div>
    </div>

    <app-modal v-if="isModalOpen" @close="closeModal">
      <h3 slot="header">Pomodoro</h3>
      <p slot="body">The pomodoro technique is a time management method that uses a timer to break down work into intervals separated by short breaks.</p>
    </app-modal>

  </main>

</script>

<script type="text/x-template" id="app-modal">
  <transition name="modal">
    <div class="modal">
      <div class="modal__inner flex-center">
        <div class="modal__content">
          <div class="modal-header">
            <slot name="header"></slot>
            <button @click="$emit('close')" class="modal__close">
              <svg width="14" height="14" xmlns="http://www.w3.org/2000/svg"><path d="M5.586 7L.636 2.05A1 1 0 0 1 2.05.636L7 5.586l4.95-4.95a1 1 0 0 1 1.414 1.414L8.414 7l4.95 4.95a1 1 0 0 1-1.414 1.414L7 8.414l-4.95 4.95A1 1 0 0 1 .636 11.95L5.586 7z" fill="#333" fill-rule="evenodd"/></svg>
            </button>
          </div>
          <div class="modal-body">
            <slot name="body"></slot>
          </div>
        </div>
        <div @click="$emit('close')" class="modal__overlay"></div>
      </div>
    </div>
  </transition>
</script>

<script type="text/x-template" id="app-footer">
  <footer>
    <div class="timecontainer">
      <div class="controls">

        <button @click="reset" title="reset" class="btn-sm">
          <svg width="16" height="20" xmlns="http://www.w3.org/2000/svg"><path d="M8 4.023c4.398 0 8 3.556 8 7.954 0 4.397-3.602 8-8 8s-8-3.603-8-8h2.012A5.97 5.97 0 0 0 8 17.965a5.97 5.97 0 0 0 5.988-5.988A5.97 5.97 0 0 0 8 5.988v4.024L2.994 5.006 8 0v4.023z" fill="#FFF" fill-rule="nonzero"/></svg>
        </button>

        <button @click="toggleTimer" class="btn-md">
          <span v-if="isTimerActive" class="flex-center">
            <svg width="12" height="14" xmlns="http://www.w3.org/2000/svg"><path d="M8.016.016H12v13.968H8.016V.016zM0 13.984V.016h3.984v13.968H0z" fill="#FFF" fill-rule="nonzero"/></svg>
          </span>
          <span v-else class="flex-center">
            <svg width="14" height="18" xmlns="http://www.w3.org/2000/svg"><path d="M0 0l14 9-14 9z" fill="#FFF" fill-rule="nonzero"/></svg>
          </span>
        </button>

        <button title="info" class="btn-sm" @click="toggleModal">
          <svg width="20" height="20" xmlns="http://www.w3.org/2000/svg"><path d="M9.016 7V4.984h1.968V7H9.016zM10 18.016c4.406 0 8.016-3.61 8.016-8.016 0-4.406-3.61-8.016-8.016-8.016-4.406 0-8.016 3.61-8.016 8.016 0 4.406 3.61 8.016 8.016 8.016zm0-18A9.963 9.963 0 0 1 19.984 10 9.963 9.963 0 0 1 10 19.984 9.963 9.963 0 0 1 .016 10 9.963 9.963 0 0 1 10 .016zm-.984 15v-6h1.968v6H9.016z" fill="#FFF" fill-rule="nonzero"/></svg>
        </button>
      </div>
    </div>
  </footer>
</script>

<div id="app" class="site" :class="{'site--break': isBreakTime}">

  <app-header
    :init-work="initWork"
    :init-short-break="initShortBreak"
    @reset="resetSettings"
    @change="handleChange($event)"></app-header>

  <app-main
    :is-modal-open="isModalOpen"
    :is-break-time="isBreakTime"
    :minutes="minutes"
    :seconds="seconds"
    @close-modal="toggleModal"></app-main>

  <app-footer
    :is-timer-active="isTimerActive"
    @reset="resetUI"
    @toggle-timer="toggleTimer"
    @toggle-modal="toggleModal"></app-footer>
</div>
<script>
Vue.component('app-header', {
  props: [
  'initWork',
  'initShortBreak',
  'initLongBreak',
  'initRound'],

  data: function data() {
    return {
      isSidebarOpen: false };

  },
  methods: {
    toggleSidebar: function toggleSidebar() {
      this.isSidebarOpen = !this.isSidebarOpen;
    },
    filterChange: function filterChange(data) {
      this.$emit('change', data);
    } },

  template: '#app-header',
  components: {
    'app-sidebar': {
      props: [
      'initWork',
      'initShortBreak',
      'isSidebarOpen'],

      methods: {
        reset: function reset() {
          this.$emit('reset');
        },
        handleChange: function handleChange(event) {
          var data = event.target.dataset.type || e.srcElement.dataset.type;
          var value = Number(event.target.value) || Number(event.srcElement.value);

          this.$emit('change', { data: data, value: value });
        } },

      template: '#app-sidebar' } } });

Vue.component('app-main', {
  props: [
  'isModalOpen',
  'isBreakTime',
  'minutes',
  'seconds'],

  methods: {
    closeModal: function closeModal() {
      this.$emit('close-modal');
    } },

  components: {
    'app-modal': {
      template: '#app-modal' } },
  template: '#app-main' });

Vue.component('app-footer', {
  props: [
  'isTimerActive'],

  methods: {
    toggleTimer: function toggleTimer() {
      this.$emit('toggle-timer');
    },
    reset: function reset() {
      this.$emit('reset');
    },
    toggleModal: function toggleModal() {
      this.$emit('toggle-modal');
    } },
  template: '#app-footer' });

var vm = new Vue({
  el: '#app',
  data: {
    // Settings
    initWork: 25,
    initShortBreak: 5,

    // App state
    isBreakTime: false,
    isTimerActive: false,
    minutes: 25,
    seconds: '00',
    timer: null,
    round: 0,

    // UI
    isModalOpen: false },

  methods: {

    toggleModal: function toggleModal() {
      this.isModalOpen = !this.isModalOpen;
    },

    resetSettings: function resetSettings() {
      this.initWork = 25;
      this.initShortBreak = 5;
      this.isBreakTime ? this.minutes = this.initShortBreak : this.minutes = this.initWork;
    },

    resetUI: function resetUI() {
      this.isBreakTime = false;
      this.isTimerActive = false;
      this.minutes = this.initWork;
      this.seconds = '00';
      clearInterval(this.timer);
    },

    toggleTimer: function toggleTimer() {
      var self = this;

      function countDown() {

        var seconds = Number(self.$data.seconds);
        var minutes = self.minutes;
        var isBreak = self.isBreakTime;

        if (seconds === 0) {
          if (minutes === 0) {// End of cycle => switch to break / work
            isBreak ? self.minutes = self.initWork : self.minutes = self.initShortBreak;
            self.isBreakTime = !self.isBreakTime;

          } else {// Remove minute + start counting down from 60 seconds again
            self.minutes--;
            self.seconds = '59';
          }
        } else {// Remove seconds + if less than 10 prepend 0
          seconds <= 10 ? self.seconds = '0' + (self.seconds - 1) : self.seconds = '' + (self.seconds - 1);
        }
      }

      // toggle timer
      self.isTimerActive ? clearInterval(self.timer) : self.timer = setInterval(countDown, 1000);
      self.isTimerActive = !self.isTimerActive;
    },

    handleChange: function handleChange(obj) {

      var data = obj.data;
      var value = obj.value;

      switch (data) {
        case "work":
          this.initWork = value;

          if (!this.isBreakTime) {
            this.minutes = value;
            this.seconds = '00';
          }

          break;
        case "short-break":
          this.initShortBreak = value;

          if (this.isBreakTime) {
            this.minutes = value;
            this.seconds = '00';
          }
          break;}
    } } });
  </script>
</div><!--timer-->


  <div id="lower left" class="tdl" > <!--Todo list-->
    <div id="myDIV" class="header">
      <h2>To Do List</h2>
      <input type="text" id="Input" placeholder="Enter a task...">
      <span onclick="newListElement()" class="addBtn">Add</span>
    </div>
    <ul id="myUL"></ul>

    <script>
    // Create a "close" button and append it to each list item
    var myNodelist = document.getElementsByTagName("LI");
    var i;
    for (i = 0; i < myNodelist.length; i++) {
      var span = document.createElement("SPAN");
      var txt = document.createTextNode("\u00D7");
      span.className = "close";
      span.appendChild(txt);
      myNodelist[i].appendChild(span);
    }

    // Click on a close button to hide the current list item
    var close = document.getElementsByClassName("close");
    var i;
    for (i = 0; i < close.length; i++) {
      close[i].onclick = function() {
        var div = this.parentElement;
        div.style.display = "none";
      }
    }

    // Add a "checked" symbol when clicking on a list item
    var list = document.querySelector('ul');
    list.addEventListener('click', function(ev) {
      if (ev.target.tagName === 'LI') {
        ev.target.classList.toggle('checked');
      }
    }, false);

    // Create a new list item when clicking on the "Add" button
    function newListElement() {
      var li = document.createElement("li");
      var inputValue = document.getElementById("Input").value;
      var t = document.createTextNode(inputValue);
      li.appendChild(t);
      if (inputValue === "") {
        alert("You must write something!");
      } else {
        document.getElementById("myUL").appendChild(li);
      }
      document.getElementById("Input").value = "";

      var span = document.createElement("SPAN");
      var txt = document.createTextNode("\u00D7");
      span.className = "close";
      span.appendChild(txt);
      li.appendChild(span);

      for (i = 0; i < close.length; i++) {
        close[i].onclick = function() {
          var div = this.parentElement;
          div.style.display = "none";
        }
      }
    }
    </script>
  </div><!--Todo list-->
</div> <!--left-->

    <div id="log" class="log"><!--Log Out -->
      <button  href="#" id="one" onClick="document.location.href='logOut.php'" >Log Out</button>
      <button  href="#" id="two" onClick="document.location.href='save.php'">Save</button>
    </div><!--Log Out -->

  </div><!--parent-->
  </body>
</html>
